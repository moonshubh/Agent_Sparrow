/* FeedMe Navigation Polish - must be before @tailwind to comply with CSS spec */
@import '../features/feedme/styles/feedme-navigation.css';

/* KaTeX CSS for LaTeX math rendering */
@import 'katex/dist/katex.min.css';

/* Highlight.js CSS for syntax highlighting (rehype-highlight) */
@import 'highlight.js/styles/github-dark.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Chat Layout Overrides for Centered Content */
@layer components {

  /* Ensure sidebar behaves as overlay */
  [data-sidebar="sidebar"] {
    position: relative;
    height: 100%;
  }

  /* Sidebar in collapsed state should still be visible */
  .group\/sidebar-wrapper[data-state="collapsed"] [data-sidebar="sidebar"] {
    width: var(--sidebar-width-icon);
  }

  /* Ensure proper z-indexing for sidebar components */
  [data-sidebar="sidebar"] {
    z-index: 30;
  }

  /* Smooth transitions for sidebar state changes */
  [data-sidebar="sidebar"] {
    transition: width 200ms ease-in-out;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* === DARK ACADEMIA UTILITIES === */

  /* Warm gradient background - replaces cold AI gradient */
  .ai-gradient-bg,
  .academia-gradient-bg {
    background: linear-gradient(135deg,
        hsl(var(--background)) 0%,
        hsl(30 6% 10%) 50%,
        hsl(25 8% 8%) 100%);
  }

  /* Paper texture overlay - subtle scholarly feel */
  .paper-texture {
    position: relative;
  }

  .paper-texture::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: var(--texture-grain);
    opacity: var(--grain-opacity, 0.015);
    mix-blend-mode: overlay;
    pointer-events: none;
    z-index: 1;
    border-radius: inherit;
  }

  /* Warm input styling - paper-like feel */
  .glass-input,
  .academia-input {
    background: hsl(var(--input));
    border: 1px solid hsl(var(--border));
    border-radius: var(--radius-lg);
    transition: all 0.2s ease;
  }

  .academia-input:focus,
  .glass-input:focus {
    border-color: hsl(var(--primary) / 0.5);
    box-shadow: 0 0 0 3px hsl(var(--primary) / 0.1);
  }

  /* Warm shadows - candlelit depth */
  .shadow-academia-sm {
    box-shadow: 0 2px 4px hsla(var(--shadow-color, 30 15% 5%), 0.12);
  }

  .shadow-academia-md {
    box-shadow:
      0 4px 8px hsla(var(--shadow-color, 30 15% 5%), 0.1),
      0 2px 4px hsla(var(--shadow-color, 30 15% 5%), 0.06);
  }

  .shadow-academia-lg {
    box-shadow:
      0 8px 24px hsla(var(--shadow-color, 30 15% 5%), 0.12),
      0 4px 8px hsla(var(--shadow-color, 30 15% 5%), 0.08);
  }

  /* Terracotta glow - warm accent */
  .glow-terracotta {
    box-shadow: 0 0 20px hsla(200.4, 98%, 39.4%, 0.25);
  }

  /* Sage glow - nature accent */
  .glow-sage {
    box-shadow: 0 0 20px hsla(135, 25%, 40%, 0.2);
  }

  /* Gold glow - highlight accent */
  .glow-gold {
    box-shadow: 0 0 20px hsla(40, 65%, 45%, 0.25);
  }

  /* Organic rounded corners */
  .rounded-organic {
    border-radius: var(--radius-lg);
  }

  .rounded-organic-xl {
    border-radius: var(--radius-xl);
  }

  /* Message bubble shapes - asymmetric organic */
  .bubble-user {
    border-radius: var(--radius-xl) var(--radius-sm) var(--radius-xl) var(--radius-xl);
  }

  .bubble-agent {
    border-radius: var(--radius-sm) var(--radius-xl) var(--radius-xl) var(--radius-xl);
  }

  /* Scholarly card - elevated paper feel */
  .card-academia {
    background: hsl(var(--card));
    border: 1px solid hsl(var(--border));
    border-radius: var(--radius-md);
    box-shadow:
      0 1px 3px hsla(var(--shadow-color, 30 15% 5%), 0.08),
      0 1px 2px hsla(var(--shadow-color, 30 15% 5%), 0.06);
    transition: all 0.2s ease;
  }

  .card-academia:hover {
    border-color: hsl(var(--border) / 0.8);
    box-shadow:
      0 4px 12px hsla(var(--shadow-color, 30 15% 5%), 0.1),
      0 2px 4px hsla(var(--shadow-color, 30 15% 5%), 0.06);
  }

  /* Terracotta accent button */
  .btn-terracotta {
    background: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
    border: none;
    border-radius: var(--radius-md);
    font-family: var(--font-serif);
    font-weight: 500;
    transition: all 0.2s ease;
  }

  .btn-terracotta:hover {
    background: hsl(var(--terracotta-400, 200.4 98% 39.4%));
    transform: translateY(-1px);
    box-shadow: 0 4px 12px hsla(200.4, 98%, 39.4%, 0.2);
  }

  /* Sage secondary button */
  .btn-sage {
    background: hsl(var(--accent));
    color: hsl(var(--accent-foreground));
    border: none;
    border-radius: var(--radius-md);
    font-family: var(--font-serif);
    font-weight: 500;
    transition: all 0.2s ease;
  }

  .btn-sage:hover {
    background: hsl(var(--sage-400, 135 22% 50%));
    transform: translateY(-1px);
  }

  /* Thinking/streaming indicator - warm */
  .thinking-indicator {
    color: hsl(var(--gold-400, 40 60% 55%));
    font-style: italic;
  }

  /* Badge variants */
  .badge-terracotta {
    background: hsl(var(--terracotta-600, 15 50% 35%) / 0.15);
    color: hsl(var(--terracotta-300, 15 45% 70%));
    border: 1px solid hsl(var(--terracotta-600, 15 50% 35%) / 0.25);
  }

  .badge-sage {
    background: hsl(var(--sage-600, 135 20% 30%) / 0.15);
    color: hsl(var(--sage-300, 135 18% 65%));
    border: 1px solid hsl(var(--sage-600, 135 20% 30%) / 0.25);
  }

  .badge-gold {
    background: hsl(var(--gold-600, 40 60% 35%) / 0.15);
    color: hsl(var(--gold-300, 40 50% 70%));
    border: 1px solid hsl(var(--gold-600, 40 60% 35%) / 0.25);
  }

  .badge-stone {
    background: hsl(var(--stone-600, 25 10% 25%) / 0.2);
    color: hsl(var(--stone-300, 25 5% 65%));
    border: 1px solid hsl(var(--stone-600, 25 10% 25%) / 0.3);
  }

  /* Background grid pattern utility using CSS variables */
  .bg-grid-pattern {
    background-image:
      linear-gradient(hsl(var(--accent) / 0.1) 1px, transparent 1px),
      linear-gradient(90deg, hsl(var(--accent) / 0.1) 1px, transparent 1px);
    background-size: 32px 32px;
  }

  /* Typewriter animation for streaming text */
  .typewriter {
    overflow: hidden;
    white-space: nowrap;
    animation: typing 2s steps(40, end);
  }

  @keyframes typing {
    from {
      width: 0
    }

    to {
      width: 100%
    }
  }

  /* Smooth message entrance */
  .message-enter {
    animation: messageSlideIn 0.3s ease-out;
  }

  @keyframes messageSlideIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Citation hover effects */
  .citation-hover {
    transition: all 0.2s ease;
  }

  .citation-hover:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }

  /* Gradient glow button with cursor tracking */
  .gradient-glow-button {
    position: relative;
    overflow: hidden;
    background: hsl(0 0% 14.9%);
    /* Establish proper stacking context */
    z-index: 0;
  }

  .gradient-glow-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(150px circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
        hsl(217.2 83.2% 53.3% / 0.6) 0%,
        hsl(225.9 70.7% 40.2% / 0.4) 40%,
        hsl(226.2 57% 21% / 0.2) 70%,
        transparent 100%);
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
    /* Keep glow above the base background but behind interactive content */
    z-index: 0;
  }

  .gradient-glow-button:hover::before {
    opacity: 1;
  }

  .gradient-glow-button>* {
    position: relative;
    z-index: 1;
  }

  /* Screen reader only content */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Focus visible for better keyboard navigation */
  .focus-visible {
    outline: 2px solid hsl(var(--primary));
    outline-offset: 2px;
  }

  /* No scrollbar utility for horizontal scrolling elements */
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* FeedMe Two-Panel Layout Styles */
  .feedme-two-panel {
    height: 100vh;
    background: hsl(var(--background));
    overflow: hidden;
  }

  .feedme-left-panel {
    background: hsl(var(--sidebar-background));
    border-right: 1px solid hsl(var(--border));
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  .feedme-right-panel {
    background: hsl(var(--background));
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  .feedme-sidebar-nav {
    background: hsl(var(--sidebar-background));
    border-color: hsl(var(--sidebar-border));
  }

  .feedme-folder-pane {
    background: hsl(var(--sidebar-background));
  }

  /* Panel resize handle styling */
  .feedme-panel-handle {
    background: hsl(var(--border));
    transition: background-color 0.2s ease;
  }

  .feedme-panel-handle:hover {
    background: hsl(var(--accent));
  }

  /* Conversation card transitions */
  .conversation-card {
    transition: all 0.2s ease;
  }

  .conversation-card:hover {
    border-color: hsl(var(--accent) / 0.5);
    box-shadow: 0 4px 12px rgba(0, 149, 255, 0.1);
  }

  /* Responsive chat container utilities */
  .chat-container-responsive {
    width: 100%;
    max-width: var(--container-max);
    margin-left: auto;
    margin-right: auto;
  }

  @media (min-width: 768px) {
    .chat-container-responsive {
      width: var(--container-md);
    }
  }

  @media (min-width: 1024px) {
    .chat-container-responsive {
      width: var(--container-lg);
    }
  }

  @media (min-width: 1280px) {
    .chat-container-responsive {
      width: var(--container-xl);
    }
  }

  /* Tiptap Editor Styles */
  .ProseMirror {
    outline: none;
    padding: 8px 12px;
    border-radius: 6px;
    /* Reduce edit-mode font-size by ~3px for clear parity */
    font-size: 0.9125rem;
    /* ~13px */
    line-height: 1.75;
    /* improved readability in edit mode */
  }

  .ProseMirror:focus {
    outline: none !important;
    box-shadow: none !important;
    border: none !important;
  }

  .ProseMirror-focused {
    outline: none !important;
    box-shadow: none !important;
    border: none !important;
  }

  /* Extra hardening for UA focus rings on contentEditable */
  [contenteditable="true"]:focus,
  [contenteditable="true"]:focus-visible {
    outline: none !important;
    box-shadow: none !important;
    border: none !important;
  }

  .ProseMirror p {
    margin: 0.75rem 0;
    /* more breathing room between paragraphs */
  }

  .ProseMirror p:first-child {
    margin-top: 0;
  }

  .ProseMirror p:last-child {
    margin-bottom: 0;
  }

  .ProseMirror ul,
  .ProseMirror ol {
    margin: 0.75rem 0;
    /* increase vertical rhythm for lists */
    padding-left: 1.5rem;
  }

  .ProseMirror li {
    margin: 0.25rem 0;
  }

  .ProseMirror h1,
  .ProseMirror h2,
  .ProseMirror h3 {
    margin-top: 1.25rem;
    margin-bottom: 0.5rem;
    line-height: 1.4;
  }

  /* Speaker labels: first bold token in a paragraph appears like inline code */
  .ProseMirror p>strong:first-child,
  .ProseMirror p>b:first-child {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    background-color: hsl(var(--muted));
    color: hsl(var(--foreground));
    border-radius: 4px;
    padding: 0 0.25rem;
  }

  .ProseMirror blockquote {
    border-left: 3px solid hsl(var(--accent));
    padding-left: 1rem;
    margin: 0.5rem 0;
    font-style: italic;
    color: hsl(var(--muted-foreground));
  }

  .ProseMirror strong {
    font-weight: 600;
  }

  .ProseMirror em {
    font-style: italic;
  }

  .ProseMirror .is-editor-empty:first-child::before {
    color: hsl(var(--muted-foreground));
    content: attr(data-placeholder);
    float: left;
    height: 0;
    pointer-events: none;
  }
}

@layer base {
  :root {
    /* ============================================================
       DARK ACADEMIA DESIGN SYSTEM - "The Scholar's Study"
       A warm, intellectual aesthetic combining organic natural
       elements with scholarly atmosphere
       ============================================================ */

    /* === TYPOGRAPHY === */
    --font-serif: 'Lora', 'Source Serif Pro', Georgia, 'Times New Roman', serif;
    --font-sans: 'Poppins', -apple-system, BlinkMacSystemFont, sans-serif;
    --font-mono: 'JetBrains Mono', 'Fira Code', ui-monospace, monospace;

    /* Type Scale - Slightly larger for serif readability */
    --text-xs: 0.8125rem;
    --text-sm: 0.9375rem;
    --text-base: 1.0625rem;
    --text-lg: 1.1875rem;
    --text-xl: 1.375rem;
    --text-2xl: 1.625rem;
    --text-3xl: 2rem;

    /* Line Heights - More generous for serif */
    --leading-tight: 1.3;
    --leading-snug: 1.45;
    --leading-normal: 1.65;
    --leading-relaxed: 1.8;

    /* === BORDER RADIUS - Soft Organic === */
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-xl: 20px;
    --radius-2xl: 24px;
    --radius-full: 9999px;
    --radius: 0.75rem;

    /* === LIGHT THEME (Warm Parchment) === */
    --background: 40 20% 97%;
    --foreground: 25 15% 15%;
    --card: 40 15% 95%;
    --card-foreground: 25 15% 15%;
    --popover: 40 15% 95%;
    --popover-foreground: 25 15% 15%;

    /* Terracotta Primary */
    --primary: 200.4 98% 38%;
    --primary-foreground: 40 20% 97%;
    --secondary: 35 10% 90%;
    --secondary-foreground: 25 15% 20%;
    --muted: 35 8% 88%;
    --muted-foreground: 25 8% 45%;

    /* Sage Accent */
    --accent: 135 25% 40%;
    --accent-foreground: 40 20% 97%;
    --destructive: 0 50% 50%;
    --destructive-foreground: 40 20% 97%;
    --border: 30 10% 85%;
    --input: 35 8% 92%;
    --ring: 200.4 98% 38%;

    /* Chat-specific colors - Light */
    --chat-background: 40 20% 97%;
    --chat-user-bg: 200.4 98% 28%;
    --chat-user-text: 40 20% 97%;
    --chat-agent-bg: 35 10% 92%;
    --chat-agent-text: 25 15% 15%;
    --chat-input-bg: 35 8% 94%;
    --chat-input-text: 25 15% 15%;
    --chat-metadata: 25 8% 50%;

    /* Code surfaces */
    --code-block-bg: 35 12% 90%;

    /* Paper texture */
    --texture-grain: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    --grain-opacity: 0.01;

    /* Responsive container widths */
    --container-sm: 100%;
    --container-md: 90%;
    --container-lg: 85%;
    --container-xl: 80%;
    --container-max: 1400px;

    /* Sidebar colors - Light */
    --sidebar-background: 35 12% 94%;
    --sidebar-foreground: 25 15% 20%;
    --sidebar-primary: 200.4 98% 38%;
    --sidebar-primary-foreground: 40 20% 97%;
    --sidebar-accent: 35 10% 88%;
    --sidebar-accent-foreground: 25 15% 20%;
    --sidebar-border: 30 8% 82%;
    --sidebar-ring: 200.4 98% 38%;

    /* Severity colors */
    --critical: 0 50% 50%;
    --high: 40 65% 45%;
    --medium: 135 25% 40%;

    /* Legacy compatibility */
    --neutral-base: 25 10% 12%;
    --neutral-card: 25 8% 18%;
    --mb-blue-300: 200.4 98% 39.4%;
    --brand-surface: 30 6% 14%;
  }

  .dark {
    /* ============================================================
       DARK ACADEMIA - "The Scholar's Study at Night"
       Deep warm charcoal with candlelit warmth
       ============================================================ */

    /* === BACKGROUND SURFACES - Warm Stone === */
    --background: 30 8% 8%;
    --foreground: 40 15% 92%;
    --card: 30 6% 12%;
    --card-foreground: 40 15% 92%;
    --popover: 30 6% 14%;
    --popover-foreground: 40 15% 92%;

    /* === TERRACOTTA PRIMARY - Fireplace Warmth === */
    --primary: 200.4 98% 38%;
    --primary-foreground: 40 20% 97%;

    /* === SECONDARY - Warm Stone === */
    --secondary: 30 5% 16%;
    --secondary-foreground: 40 12% 85%;

    /* === MUTED - Soft Stone === */
    --muted: 30 4% 18%;
    --muted-foreground: 35 8% 55%;

    /* === SAGE ACCENT - Nature's Wisdom === */
    --accent: 135 25% 45%;
    --accent-foreground: 40 20% 97%;

    /* === SEMANTIC COLORS === */
    --destructive: 0 50% 45%;
    --destructive-foreground: 40 20% 97%;
    --border: 30 5% 18%;
    --input: 30 5% 14%;
    --ring: 200.4 98% 38%;

    /* === TERRACOTTA SCALE === */
    --terracotta-600: 200.4 98% 28%;
    --terracotta-500: 200.4 98% 38%;
    --terracotta-400: 200.4 98% 45%;
    --terracotta-300: 200.4 98% 39.4%;

    /* === SAGE SCALE === */
    --sage-600: 135 20% 30%;
    --sage-500: 135 25% 40%;
    --sage-400: 135 22% 50%;
    --sage-300: 135 18% 65%;

    /* === WARM GOLD SCALE === */
    --gold-600: 40 60% 35%;
    --gold-500: 40 65% 45%;
    --gold-400: 40 60% 55%;
    --gold-300: 40 50% 70%;

    /* === STONE SCALE === */
    --stone-600: 25 10% 25%;
    --stone-500: 25 8% 35%;
    --stone-400: 25 6% 50%;
    --stone-300: 25 5% 65%;

    /* === CREAM TEXT === */
    --cream-50: 40 20% 97%;
    --cream-100: 40 15% 92%;

    /* === CHAT COLORS - Dark Academia === */
    --chat-background: 30 8% 8%;
    --chat-user-bg: 200.4 98% 28%;
    --chat-user-text: 40 20% 97%;
    --chat-agent-bg: 30 5% 12%;
    --chat-agent-text: 40 15% 92%;
    --chat-input-bg: 30 5% 11%;
    --chat-input-text: 40 15% 92%;
    --chat-metadata: 35 8% 50%;

    /* Code surfaces - Warmer, darker background */
    --code-block-bg: 30 6% 12%;

    /* Responsive container widths */
    --container-sm: 100%;
    --container-md: 90%;
    --container-lg: 85%;
    --container-xl: 80%;
    --container-max: 1400px;

    /* === SIDEBAR - Scholarly Panel === */
    --sidebar-background: 30 6% 11%;
    --sidebar-foreground: 40 12% 88%;
    --sidebar-primary: 200.4 98% 38%;
    --sidebar-primary-foreground: 40 20% 97%;
    --sidebar-accent: 30 5% 16%;
    --sidebar-accent-foreground: 40 12% 88%;
    --sidebar-border: 30 5% 16%;
    --sidebar-ring: 200.4 98% 38%;

    /* === SEVERITY - Muted Earth Tones === */
    --critical: 0 50% 50%;
    --high: 40 65% 50%;
    --medium: 135 30% 45%;

    /* === NEUTRAL BASE === */
    --neutral-base: 30 8% 10%;
    --neutral-card: 30 6% 14%;

    /* === LEGACY COMPATIBILITY === */
    --mb-blue-300: 200.4 98% 39.4%;
    --brand-surface: 30 6% 12%;

    /* === SHADOWS - Warm Undertones === */
    --shadow-color: 30 15% 5%;

    /* === PAPER TEXTURE === */
    --texture-grain: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    --grain-opacity: 0.015;
  }
}

/* Override highlight.js styles for Dark Academia theme */
.dark .hljs {
  background: transparent !important;
  color: hsl(var(--foreground));
}

.dark .hljs-comment,
.dark .hljs-quote {
  color: hsl(var(--muted-foreground));
  font-style: italic;
}

.dark .hljs-doctag,
.dark .hljs-keyword,
.dark .hljs-formula {
  color: hsl(var(--terracotta-400));
  /* Orange/Terracotta instead of blue/purple */
}

.dark .hljs-section,
.dark .hljs-name,
.dark .hljs-selector-tag,
.dark .hljs-deletion,
.dark .hljs-subst {
  color: hsl(var(--terracotta-300));
}

.dark .hljs-literal {
  color: hsl(var(--gold-400));
}

.dark .hljs-string,
.dark .hljs-regexp,
.dark .hljs-addition,
.dark .hljs-attribute,
.dark .hljs-meta .hljs-string {
  color: hsl(var(--sage-400));
  /* Sage green for strings */
}

.dark .hljs-attr,
.dark .hljs-variable,
.dark .hljs-template-variable,
.dark .hljs-type,
.dark .hljs-selector-class,
.dark .hljs-selector-attr,
.dark .hljs-selector-pseudo,
.dark .hljs-number {
  color: hsl(var(--gold-400));
  /* Gold for numbers/types */
}

.dark .hljs-symbol,
.dark .hljs-bullet,
.dark .hljs-link,
.dark .hljs-meta,
.dark .hljs-selector-id,
.dark .hljs-title {
  color: hsl(var(--terracotta-400));
  /* Orange for titles/links */
}

.dark .hljs-emphasis {
  font-style: italic;
}

.dark .hljs-strong {
  font-weight: bold;
}

.dark .hljs-link {
  text-decoration: underline;
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-family: var(--font-serif);
    font-size: var(--text-base);
    line-height: var(--leading-normal);
    letter-spacing: 0.01em;
    font-feature-settings: 'liga' 1, 'kern' 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Dark Academia Typography - Scholarly Headings */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: var(--font-serif);
    font-weight: 600;
    line-height: var(--leading-tight);
    letter-spacing: -0.01em;
    color: hsl(var(--foreground));
  }

  h1 {
    font-size: var(--text-3xl);
  }

  h2 {
    font-size: var(--text-2xl);
  }

  h3 {
    font-size: var(--text-xl);
  }

  h4 {
    font-size: var(--text-lg);
  }

  /* Prose styling for readable content */
  p {
    line-height: var(--leading-relaxed);
    margin-bottom: 1em;
  }

  /* Strong/emphasis with warmth */
  strong,
  b {
    font-weight: 600;
    color: hsl(var(--foreground));
  }

  em,
  i {
    font-style: italic;
    color: hsl(var(--muted-foreground));
  }

  /* Chat-specific styles */
  .chat-container {
    background: hsl(var(--chat-background));
  }

  .chat-message-user {
    background: hsl(var(--chat-user-bg));
    color: hsl(var(--chat-user-text));
  }

  .chat-message-agent {
    background: hsl(var(--chat-agent-bg));
    color: hsl(var(--chat-agent-text));
  }

  .chat-input {
    background: hsl(var(--chat-input-bg));
    color: hsl(var(--chat-input-text));
  }

  .chat-metadata {
    color: hsl(var(--chat-metadata));
  }

  /* Dark Academia Scrollbar - Aged Leather Feel */
  .dark ::-webkit-scrollbar {
    width: 8px;
  }

  .dark ::-webkit-scrollbar-track {
    background: hsl(30 6% 10%);
    border-radius: 4px;
  }

  .dark ::-webkit-scrollbar-thumb {
    background: hsl(var(--stone-500));
    border-radius: 4px;
    border: 2px solid hsl(30 6% 10%);
    transition: background-color 0.2s ease;
  }

  .dark ::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--terracotta-500));
  }

  /* Light theme scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background: hsl(35 10% 92%);
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb {
    background: hsl(25 8% 70%);
    border-radius: 4px;
    transition: background-color 0.2s ease;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--primary));
  }

  /* FeedMe custom scrollbar styling */
  .feedme-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .feedme-scrollbar::-webkit-scrollbar-track {
    background: hsl(var(--background));
    border-radius: 3px;
  }

  .feedme-scrollbar::-webkit-scrollbar-thumb {
    background: hsl(var(--accent) / 0.3);
    border-radius: 3px;
    transition: background-color 0.2s ease;
  }

  .feedme-scrollbar::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--accent) / 0.6);
  }

  .feedme-scrollbar::-webkit-scrollbar-corner {
    background: hsl(var(--background));
  }

  /* Animation utilities removed - use Tailwind's delay-1000, delay-2000 instead */

  /* Enhanced pulse animation for login elements */
  @keyframes enhanced-pulse {

    0%,
    100% {
      opacity: 1;
      transform: scale(1);
    }

    50% {
      opacity: 0.7;
      transform: scale(1.02);
    }
  }

  .animate-enhanced-pulse {
    animation: enhanced-pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    will-change: transform, opacity;
  }

  /* Floating animation for background orbs */
  @keyframes float {

    0%,
    100% {
      transform: translateY(0px) rotate(0deg);
    }

    33% {
      transform: translateY(-10px) rotate(1deg);
    }

    66% {
      transform: translateY(5px) rotate(-1deg);
    }
  }

  .animate-float {
    --float-duration: 6s;
    --float-delay: 0s;
    animation: float var(--float-duration, 6s) ease-in-out infinite;
    animation-delay: var(--float-delay, 0s);
    will-change: transform;
  }

  /* Minor upward offset for center hero icon */
  .hero-offset {
    transform: translateY(-2rem);
  }

  @media (min-width: 768px) {
    .hero-offset {
      transform: translateY(-2.5rem);
    }
  }

  /* === INLINE THINKING ANIMATIONS (LibreChat-style) === */

  /* Pulsing dot animation for "Thinking..." indicator */
  @keyframes thinking-pulse {
    0%, 100% {
      opacity: 0.3;
    }
    50% {
      opacity: 1;
    }
  }

  .thinking-dot {
    animation: thinking-pulse 1.4s ease-in-out infinite;
  }

  /* Streaming cursor for thinking content (LibreChat pattern) */
  .thinking-streaming::after {
    content: '';
    display: inline-block;
    width: 9px;
    height: 9px;
    background: currentColor;
    border-radius: 50%;
    animation: thinking-pulse 1.25s ease-in-out infinite;
    margin-left: 0.25rem;
    vertical-align: middle;
  }

  /* Smooth expand/collapse for thinking panel */
  .thinking-content-grid {
    display: grid;
    grid-template-rows: 0fr;
    transition: grid-template-rows 300ms ease-out;
  }

  .thinking-content-grid.expanded {
    grid-template-rows: 1fr;
  }

  /* Thinking container styling - subtle gray background (LibreChat-inspired) */
  .thinking-container {
    border: 1px solid hsl(var(--border) / 0.6);
    background: hsl(var(--secondary) / 0.3);
    border-radius: 0.75rem;
    padding: 1rem;
  }

  /* Animation delay utilities for staggered dots */
  .animation-delay-0 {
    animation-delay: 0ms;
  }
  .animation-delay-150 {
    animation-delay: 150ms;
  }
  .animation-delay-200 {
    animation-delay: 200ms;
  }
  .animation-delay-300 {
    animation-delay: 300ms;
  }
  .animation-delay-400 {
    animation-delay: 400ms;
  }
}